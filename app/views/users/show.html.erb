<div class="container">
  <div class="row">
    <div class="col-6-lg">
      <div class="user__box">
        <h1>Profile of <%= @user.first_name.capitalize %></h1>
        <p>
          <% user_avatar = current_user.facebook_picture_url || current_user.avatar || "default-avatar.png" %>
          <%= image_tag user_avatar, class: "avatar__profile" %>
        </p>
        <p>
          <% if @user.reviews.any? %>
            <%= render "average_review_ratings" %>
          <% else %>
            <h3><%= "#{@user.first_name.capitalize} has no reviews yet" %></h3>
          <% end %>
        </p>
        <div class="user__review__details">
          <% if policy(@user).edit? %>
            <form>
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label class="user__form__label">First Name</label>
                  <input class="form-control user__form__text" placeholder=<%= "#{@user.first_name.capitalize}" %> readonly>
                </div>
                <div class="form-group col-md-6">
                  <label class="user__form__label">Last Name</label>
                  <input class="form-control user__form__text" placeholder=<%= "#{@user.last_name.capitalize}" %> readonly>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label class="user__form__label">Email</label>
                  <input class="form-control user__form__text" placeholder=<%= " #{@user.email}" %> readonly>
                </div>
                <div class="form-group col-md-6">
                  <label class="user__form__label">Age</label>
                  <input class="form-control user__form__text" placeholder=<%= " #{@user.age}" %> readonly>
                </div>
              </div>
              <div class="form-row">
                <div class="form-group col-md-12">
                  <label class="user__form__label">Description</label>
                  <textarea class="form-control" placeholder=<%= " #{@user.email}" %> readonly rows="3"></textarea>
                </div>
              </div>
              <div>
                <%= link_to "Edit Profile", edit_user_path(@user), class: "btn btn-success" %>
              </div>
            </form>
          <% else %>
            <ul style="list-style-type: none;">
              <li><%= " #{@user.first_name.capitalize}" %></li>
              <li><%= " Age: #{@user.age}" %></li>
              <li><%= " #{@user.description}" %></li>
            </ul>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-6-lg">
      <div class="user__box">
        <% if @user.reviews.any? %>
          <h2><%= "Reviews of #{@user.first_name.capitalize}" %></h2>
        <% else %>
          <h3><%= "#{@user.first_name.capitalize} has no reviews yet" %></h3>
        <% end %>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-6-lg">
      <div class="user__box">
        <div class="user__reviews">
          <% if @user.reviews.any? %>
            <% @user.reviews.each do |review|%>
              <div class ="user__reviews__card">
                <p><%= review.content %></p>
                <p>
                  <% review.rating.times do %>
                    <%= icon('fas star--full', 'star') %>
                  <% end %>
                  <% (5 - review.rating).times do %>
                    <%= icon('fas star--empty', 'star') %>
                  <% end %>
                </p>
                <h4><%= review.created_at %></h4>
                <h4><%= review.sender.first_name %></h4>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>


